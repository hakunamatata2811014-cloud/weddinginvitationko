<!doctype html>
<html lang="sr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Pozivnica za venƒçanje</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;600&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">

  <style>
    :root{
      --ink:#141414;
      --muted:#5f5f5f;
      --paper:#fff;
      --veil: rgba(255,255,255,.78);
      --shadow: 0 24px 90px rgba(10,10,10,.12);

      --blush:#c690a7;
      --sage:#8fb7b1;
      --gold:#d7c49a;

      --border: rgba(20,20,20,.08);
      --ring: 0 0 0 6px rgba(215,196,154,.16);
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      color:var(--ink);
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:
        radial-gradient(900px 700px at 15% 8%, rgba(143,183,177,.12), transparent 60%),
        radial-gradient(880px 680px at 85% 14%, rgba(198,144,167,.12), transparent 62%),
        linear-gradient(180deg, #ffffff, #fafbff);
      overflow-x:hidden;
    }

    /* subtle etched floral background */
    .etch{
      position:fixed; inset:0;
      pointer-events:none;
      opacity:.10;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='320' height='320'%3E%3Cg fill='none' stroke='%23141414' stroke-opacity='.55' stroke-width='1'%3E%3Cpath d='M60 200c40-90 120-140 170-105 50 35 38 120-15 160-53 40-135 32-155-55z'/%3E%3Cpath d='M110 250c60 12 128-16 160-72'/%3E%3Cpath d='M220 120c-25 45-65 70-110 78'/%3E%3Ccircle cx='250' cy='245' r='18'/%3E%3Cpath d='M250 227c0 12 0 30 0 42'/%3E%3Cpath d='M232 245c12 0 30 0 42 0'/%3E%3C/g%3E%3C/svg%3E");
      background-size: 380px 380px;
      filter: blur(.2px);
      z-index:0;
    }

    canvas#petals{
      position:fixed; inset:0;
      pointer-events:none;
      z-index:1;
      opacity:.35;
    }

    .wrap{ position:relative; z-index:2; }
    .section{
      padding: 92px 18px;
      display:flex;
      justify-content:center;
    }
    .container{ width:min(1000px, 100%); }

    .card{
      background: var(--veil);
      border: 1px solid rgba(255,255,255,.88);
      box-shadow: var(--shadow);
      border-radius: 34px;
      overflow:hidden;
      backdrop-filter: blur(14px);
      position:relative;
    }
    .card:before{
      content:"";
      position:absolute; inset:0;
      pointer-events:none;
      border-radius: 34px;
      padding: 1px;
      background: linear-gradient(135deg,
        rgba(215,196,154,.75),
        rgba(198,144,167,.32),
        rgba(143,183,177,.28),
        rgba(215,196,154,.55)
      );
      -webkit-mask:
        linear-gradient(#000 0 0) content-box,
        linear-gradient(#000 0 0);
      -webkit-mask-composite: xor;
              mask-composite: exclude;
      opacity:.75;
    }

    .hero{
      padding: 64px 24px 34px;
      text-align:center;
    }

    .kicker{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding: 10px 14px;
      border-radius: 999px;
      background: rgba(255,255,255,.75);
      border: 1px solid var(--border);
      color: var(--muted);
      font-size: 13px;
    }
    .kicker .dot{
      width:6px; height:6px; border-radius:999px;
      background: var(--gold);
      box-shadow: 0 0 0 4px rgba(215,196,154,.18);
    }

    .title{
      margin: 18px 0 10px;
      font-family: "Cormorant Garamond", serif;
      font-weight:600;
      letter-spacing:.8px;
      font-size: clamp(44px, 5.8vw, 74px);
      line-height:1.02;
    }

    .subtitle{
      margin:0 auto;
      max-width: 64ch;
      color: var(--muted);
      font-size: clamp(15px, 2.1vw, 18px);
      line-height:1.8;
    }

    .names{
      margin-top: 18px;
      font-family: "Cormorant Garamond", serif;
      font-size: clamp(20px, 3.2vw, 26px);
      letter-spacing:.4px;
      color:#232323;
    }
    .names .heart{ color: var(--gold); padding: 0 12px; }

    .seal{
      width: 120px; height: 120px;
      margin: 26px auto 0;
      border-radius: 999px;
      background: rgba(255,255,255,.70);
      border: 1px solid var(--border);
      display:grid;
      place-items:center;
      position:relative;
      box-shadow: 0 18px 50px rgba(0,0,0,.08);
    }
    .seal:before{
      content:"";
      position:absolute; inset:10px;
      border-radius:999px;
      border: 1px dashed rgba(215,196,154,.8);
      opacity:.9;
    }
    .mono{
      font-family: "Cormorant Garamond", serif;
      font-weight:600;
      font-size: 42px;
      letter-spacing: 2px;
    }
    .mono span{ color: var(--gold); }

    .rule{
      width: 200px; height: 1px;
      margin: 30px auto 0;
      background: linear-gradient(90deg, transparent, rgba(215,196,154,.9), transparent);
    }

    .actions{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      justify-content:center;
      margin-top: 22px;
    }

    .btn{
      appearance:none;
      border:0;
      cursor:pointer;
      border-radius: 18px;
      padding: 12px 14px;
      font-weight:600;
      font-size:14px;
      color: #1a1a1a;
      background: rgba(255,255,255,.86);
      border: 1px solid var(--border);
      box-shadow: 0 14px 34px rgba(0,0,0,.08);
      text-decoration:none;
      display:inline-flex;
      align-items:center;
      gap:10px;
      transition: transform .15s ease, box-shadow .15s ease;
    }
    .btn:hover{ transform: translateY(-1px); }
    .btn:focus{ outline:none; box-shadow: var(--shadow), var(--ring); }

    .btn.primary{
      background: linear-gradient(135deg, rgba(215,196,154,.92), rgba(255,255,255,.92));
      border: 1px solid rgba(215,196,154,.55);
    }
    .btn.ghost{ background: rgba(255,255,255,.72); }

    .musicbar{
      margin-top: 16px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      justify-content:center;
      align-items:center;
    }
    .pill{
      display:inline-flex;
      gap:10px;
      align-items:center;
      padding: 10px 12px;
      border-radius: 999px;
      background: rgba(255,255,255,.76);
      border: 1px solid var(--border);
      font-size: 13px;
      color: var(--muted);
    }
    .smallbtn{
      border:0;
      border-radius: 999px;
      padding: 9px 12px;
      cursor:pointer;
      background: linear-gradient(135deg, rgba(215,196,154,.40), rgba(198,144,167,.18));
      color:#1f1f1f;
      font-weight:700;
    }

    .inner{ padding: 26px 22px 38px; }
    @media (min-width: 920px){ .inner{ padding: 26px 30px 38px; } }

    .grid{ display:grid; gap:16px; }
    @media (min-width: 920px){ .grid{ grid-template-columns: 1.1fr .9fr; } }

    .panel{
      border-radius: 26px;
      background: rgba(255,255,255,.72);
      border: 1px solid rgba(20,20,20,.06);
      box-shadow: 0 18px 55px rgba(0,0,0,.07);
      padding: 18px 18px 16px;
    }

    .h3{
      margin: 6px 0 10px;
      font-family: "Cormorant Garamond", serif;
      font-weight:600;
      font-size: 26px;
      letter-spacing:.3px;
    }

    .details{ display:grid; gap:10px; }
    .row{
      display:flex;
      gap:12px;
      align-items:flex-start;
      padding: 12px 12px;
      border-radius: 18px;
      background: rgba(255,255,255,.82);
      border: 1px solid rgba(20,20,20,.06);
    }
    .icon{
      width: 40px; height: 40px;
      border-radius: 14px;
      display:grid; place-items:center;
      flex:0 0 auto;
      background: linear-gradient(135deg, rgba(215,196,154,.22), rgba(143,183,177,.12));
      border: 1px solid rgba(20,20,20,.06);
    }
    .row b{ display:block; font-weight:700; }
    .row div{ color: var(--muted); font-size: 14px; line-height:1.55; }

    .note{ margin-top: 10px; color: var(--muted); font-size: 13px; line-height:1.75; }

    .countdown{
      display:grid;
      grid-template-columns: repeat(4, 1fr);
      gap:10px;
      margin-top: 10px;
    }
    .timebox{
      padding: 16px 10px;
      border-radius: 22px;
      text-align:center;
      background: rgba(255,255,255,.82);
      border: 1px solid rgba(20,20,20,.06);
    }
    .num{
      font-family: "Cormorant Garamond", serif;
      font-weight:600;
      font-size: 38px;
      line-height:1;
      letter-spacing:.8px;
    }
    .lab{
      margin-top:8px;
      font-size: 12px;
      color: var(--muted);
      letter-spacing:.6px;
      text-transform:uppercase;
    }

    .timeline{ margin-top: 10px; display:grid; gap:10px; }
    .step{
      display:flex; gap:12px; align-items:flex-start;
      padding: 14px 14px;
      border-radius: 22px;
      background: rgba(255,255,255,.82);
      border: 1px solid rgba(20,20,20,.06);
    }
    .pin{
      width:10px; height:10px; border-radius:999px;
      margin-top: 8px;
      background: var(--gold);
      box-shadow: 0 0 0 6px rgba(215,196,154,.14);
      flex:0 0 auto;
    }
    .step p{ margin:4px 0 0; color: var(--muted); line-height:1.6; }

    .cards{
      margin-top: 16px;
      display:grid;
      gap:12px;
    }
    @media (min-width: 860px){ .cards{ grid-template-columns: repeat(3, 1fr); } }
    .icard{
      border-radius: 26px;
      padding: 18px 16px 16px;
      background: rgba(255,255,255,.78);
      border: 1px solid rgba(20,20,20,.06);
      box-shadow: 0 18px 55px rgba(0,0,0,.06);
      position:relative;
      overflow:hidden;
      min-height: 140px;
    }
    .icard:before{
      content:"";
      position:absolute;
      inset:-70px -90px auto auto;
      width: 210px; height: 210px;
      background:
        radial-gradient(circle at 35% 35%, rgba(215,196,154,.30), transparent 62%),
        radial-gradient(circle at 70% 70%, rgba(198,144,167,.18), transparent 64%);
      transform: rotate(18deg);
      opacity:.75;
    }
    .ititle{
      font-family: "Cormorant Garamond", serif;
      font-weight:600;
      font-size: 20px;
      margin: 0 0 6px;
      position:relative;
    }
    .itext{
      margin:0;
      color: var(--muted);
      line-height:1.7;
      font-size: 14px;
      position:relative;
    }

    .footer{
      text-align:center;
      padding: 18px 18px 46px;
      color: var(--muted);
      font-size: 12.5px;
    }

    /* reveal (safe) */
    .reveal{ opacity:1; transform:none; }
    .reveal.can-animate{ opacity:0; transform: translateY(14px); }
    .reveal.can-animate.show{ opacity:1; transform:none; transition: opacity .8s ease, transform .8s ease; }

    /* ===== INTRO OVERLAY (koverta/pismo) ===== */
    .site-hidden{ visibility: hidden; }
    .site-visible{ visibility: visible; }

    .intro-overlay{
      position: fixed;
      inset: 0;
      z-index: 9999;
      display: grid;
      place-items: center;
      padding: 24px;
      background:
        radial-gradient(900px 700px at 15% 8%, rgba(143,183,177,.16), transparent 60%),
        radial-gradient(880px 680px at 85% 14%, rgba(198,144,167,.16), transparent 62%),
        linear-gradient(180deg, #ffffff, #fafbff);
    }

    .intro-envelope-wrap{
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:14px;
    }

    .intro-skip{
      border: 0;
      background: rgba(255,255,255,.72);
      border: 1px solid var(--border);
      color: var(--muted);
      padding: 10px 14px;
      border-radius: 999px;
      cursor:pointer;
      font-weight:600;
      box-shadow: 0 14px 34px rgba(0,0,0,.08);
    }

    .intro-envelope{
      border: 0;
      background: transparent;
      cursor: pointer;
      padding: 0;
      -webkit-tap-highlight-color: transparent;
    }

    .intro-shadow{
      width: 360px;
      height: 36px;
      margin: 0 auto -12px auto;
      filter: blur(10px);
      background: rgba(0,0,0,.18);
      border-radius: 50%;
      opacity: .32;
    }

    .intro-body{
      position: relative;
      width: 360px;
      height: 240px;
      transform-style: preserve-3d;
      transition: transform 200ms ease;
    }
    .intro-envelope:hover .intro-body{ transform: translateY(-2px); }

    .intro-back{
      position:absolute;
      inset:0;
      background: rgba(255,255,255,.70);
      border: 1px solid rgba(20,20,20,.10);
      border-radius: 26px;
      box-shadow: 0 18px 55px rgba(0,0,0,.10);
      backdrop-filter: blur(14px);
    }

    .intro-front{
      position:absolute;
      left:0; right:0; bottom:0;
      height: 62%;
      background: rgba(255,255,255,.78);
      border: 1px solid rgba(20,20,20,.08);
      border-top: none;
      border-bottom-left-radius: 26px;
      border-bottom-right-radius: 26px;
      clip-path: polygon(0 0, 50% 52%, 100% 0, 100% 100%, 0 100%);
    }

    .intro-flap{
      position:absolute;
      left:0; right:0; top:0;
      height: 62%;
      background: linear-gradient(180deg, rgba(215,196,154,.35), rgba(255,255,255,.70));
      border: 1px solid rgba(20,20,20,.08);
      border-bottom: none;
      border-top-left-radius: 26px;
      border-top-right-radius: 26px;
      clip-path: polygon(0 0, 50% 70%, 100% 0, 100% 100%, 0 100%);
      transform-origin: top center;
      transform: rotateX(0deg);
      transition: transform 900ms cubic-bezier(.2,.9,.2,1);
      z-index: 5;
    }

    .intro-seal{
      position:absolute;
      left: 50%;
      top: 54%;
      transform: translate(-50%, -50%);
      width: 54px;
      height: 54px;
      border-radius: 999px;
      display:grid;
      place-items:center;
      font-size: 18px;
      color: white;
      background: linear-gradient(135deg, rgba(198,144,167,.92), rgba(215,196,154,.88));
      box-shadow: 0 18px 55px rgba(0,0,0,.10);
      z-index: 6;
      transition: opacity 350ms ease, transform 350ms ease;
    }

    .intro-paper{
      position:absolute;
      left: 16px;
      right: 16px;
      top: 18px;
      height: 210px;
      background: rgba(255,255,255,.92);
      border: 1px solid rgba(20,20,20,.08);
      border-radius: 22px;
      box-shadow: 0 18px 55px rgba(0,0,0,.10);
      transform: translateY(78px);
      transition: transform 1100ms cubic-bezier(.2,.9,.2,1);
      z-index: 2;
      overflow:hidden;
    }

    .intro-paper-inner{
      height:100%;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      gap:8px;
      padding: 16px;
      color: rgba(20,20,20,.88);
    }

    .intro-paper-title{
      font-family: "Cormorant Garamond", serif;
      font-weight:600;
      font-size: 28px;
      letter-spacing:.4px;
    }
    .intro-paper-sub{
      font-size: 13px;
      color: var(--muted);
      letter-spacing: .04em;
    }
    .intro-paper-names{
      margin-top: 8px;
      font-weight: 700;
      letter-spacing: .22em;
      opacity: .8;
    }

    .intro-overlay.opening .intro-flap{ transform: rotateX(160deg); }
    .intro-overlay.opening .intro-paper{ transform: translateY(-20px); }
    .intro-overlay.opening .intro-seal{
      opacity: 0;
      transform: translate(-50%, -50%) scale(.92);
    }

    .intro-overlay.done{
      opacity: 0;
      pointer-events: none;
      transition: opacity 520ms ease;
    }

    @media (max-width: 420px){
      .intro-shadow{ width: 300px; }
      .intro-body{ width: 300px; height: 220px; }
    }
  </style>
</head>

<body>
  <!-- INTRO OVERLAY: KOVERATA -->
  <div id="introOverlay" class="intro-overlay" aria-hidden="false">
    <div class="intro-envelope-wrap">
      <button id="openEnvelope" class="intro-envelope" type="button" aria-label="Otvori pozivnicu">
        <div class="intro-shadow"></div>

        <div class="intro-body">
          <div class="intro-back"></div>

          <div class="intro-paper">
            <div class="intro-paper-inner">
              <div class="intro-paper-title">Pozivnica</div>
              <div class="intro-paper-sub">Klikni da otvori≈°</div>
              <div class="intro-paper-names">A ¬∑ M</div>
            </div>
          </div>

          <div class="intro-flap"></div>
          <div class="intro-front"></div>

          <div class="intro-seal">‚ù§</div>
        </div>
      </button>

      <button id="skipIntro" class="intro-skip" type="button">Preskoƒçi</button>
    </div>
  </div>

  <!-- SAV POSTOJEƒÜI SADR≈ΩAJ -->
  <div id="siteContent" class="site-hidden">
    <div class="etch"></div>
    <canvas id="petals"></canvas>

    <div class="wrap">
      <section class="section" id="top">
        <div class="container card reveal">
          <div class="hero">
            <div class="kicker"><span class="dot"></span> Pozivnica za venƒçanje</div>

            <h1 class="title">Sa rado≈°ƒáu vas pozivamo</h1>
            <p class="subtitle">
              Da zajedno obele≈æimo dan kada se ljubav pretvara u obeƒáanje ‚Äî uz eleganciju, muziku i najdra≈æe ljude.
            </p>

            <div class="names">
              <strong>Ana</strong> <span class="heart">‚ô•</span> <strong>Marko</strong>
            </div>

            <div class="seal"><div class="mono">A<span>¬∑</span>M</div></div>
            <div class="rule"></div>

            <div class="actions">
              <a class="btn primary" id="rsvpBtn" href="#" target="_blank" rel="noreferrer">‚úÖ RSVP + izbor hrane</a>
              <a class="btn ghost" href="#detalji">üìç Detalji</a>
              <a class="btn ghost" href="#program">üï∞Ô∏è Program</a>
              <button class="btn ghost" id="copyLink" type="button">üîó Kopiraj link</button>
            </div>

            <div class="musicbar">
              <div class="pill">üéª Klasiƒçna muzika (Bach ‚Äì ‚ÄúAir‚Äù)</div>
              <button class="smallbtn" id="musicToggle" type="button">‚ñ∂ Pusti</button>
              <div class="pill" id="musicStatus">Iskljuƒçeno</div>
            </div>
          </div>

         <div class="inner">
  <div class="grid" id="detalji">
    <div class="panel reveal">
      <div class="h3">Detalji dogaƒëaja</div>

      <div class="details">
        <div class="row">
          <div class="icon">üìÖ</div>
          <div><b>Datum</b><div id="dateText">‚Äî</div></div>
        </div>

        <div class="row">
          <div class="icon">‚è∞</div>
          <div><b>Vreme</b><div>17:00 (dolazak gostiju 16:30)</div></div>
        </div>

        <div class="row">
          <div class="icon">üìç</div>
          <div><b>Mesto</b><div>Sveƒçana sala ‚ÄúBelle‚Äù, Ljubljana</div></div>
        </div>

        <div class="row">
          <div class="icon">üó∫Ô∏è</div>
          <div><b>Mapa</b><div><a href="https://www.google.com/maps" target="_blank" rel="noreferrer">Otvori Google Maps</a></div></div>
        </div>
      </div><!-- ‚úÖ zatvara .details -->

      <div class="note">Dress code: <b>Sveƒçano</b> ‚ú® (pastel detalji dobrodo≈°li)</div>
    </div>

    <div class="panel reveal">
      <div class="h3">Odbrojavanje</div>
      <div class="note" style="margin-top:0">Do venƒçanja je ostalo:</div>

      <div class="countdown">
        <div class="timebox"><div class="num" id="dd">‚Äî</div><div class="lab">dana</div></div>
        <div class="timebox"><div class="num" id="hh">‚Äî</div><div class="lab">sati</div></div>
        <div class="timebox"><div class="num" id="mm">‚Äî</div><div class="lab">min</div></div>
        <div class="timebox"><div class="num" id="ss">‚Äî</div><div class="lab">sek</div></div>
      </div>

      <div class="note">Potvrdi dolazak i izaberi opciju hrane preko dugmeta ‚ÄúRSVP + izbor hrane‚Äù.</div>

      <div style="margin-top:12px; display:flex; gap:10px; flex-wrap:wrap;">
        <a class="btn primary" id="rsvpBtn2" href="#" target="_blank" rel="noreferrer">‚úÖ Otvori RSVP</a>
        <a class="btn ghost" href="#rsvp">üìù Kako radi RSVP?</a>
      </div>
    </div>
  </div>
</div>


            <div id="program" class="panel reveal" style="margin-top:16px;">
              <div class="h3">Program veƒçeri</div>
              <div class="timeline">
                <div class="step"><div class="pin"></div><div><b>16:30 ‚Äî Dolazak gostiju</b><p>Dobrodo≈°lica i piƒáe dobrodo≈°lice.</p></div></div>
                <div class="step"><div class="pin"></div><div><b>17:00 ‚Äî Ceremonija</b><p>Sveƒçani trenutak i zajedniƒçka fotografija.</p></div></div>
                <div class="step"><div class="pin"></div><div><b>18:00 ‚Äî Veƒçera</b><p>Opcije hrane birate u RSVP linku.</p></div></div>
                <div class="step"><div class="pin"></div><div><b>20:00 ‚Äî Torta i prvi ples</b><p>Slatki deo veƒçeri + ples do kasno.</p></div></div>
              </div>
              <div class="note">(Program je primer ‚Äî lako menja≈°.)</div>
            </div>

            <div id="rsvp" class="panel reveal" style="margin-top:16px;">
              <div class="h3">RSVP & izbor hrane</div>
              <p class="note" style="margin-top:0; max-width: 78ch;">
                Link vodi na Google Sheet ili Google Form gde gosti upisuju: ime, broj osoba, opciju hrane i alergije.
              </p>
              <div style="display:flex; gap:10px; flex-wrap:wrap;">
                <a class="btn primary" id="rsvpBtn3" href="#" target="_blank" rel="noreferrer">‚úÖ Potvrdi dolazak</a>
                <a class="btn ghost" href="#top">‚¨Ü Nazad na vrh</a>
              </div>
            </div>

            <div class="cards reveal">
              <div class="icard"><h4 class="ititle">Pokloni</h4><p class="itext">Najveƒái poklon je va≈°e prisustvo. Ako ipak ≈æelite ‚Äî diskretna koverta je sasvim u redu.</p></div>
              <div class="icard"><h4 class="ititle">Deca</h4><p class="itext">Dobrodo≈°la su, ali javite unapred broj mesta i uzrast zbog organizacije.</p></div>
              <div class="icard"><h4 class="ititle">Kontakt</h4><p class="itext">Za pitanja: +386 xx xxx xxx (zameni brojeve).</p></div>
            </div>

            <div class="footer">Sa ljubavlju ‚Äî radujemo se va≈°em dolasku üåø</div>
          </div>
        </div>
      </section>
    </div>

    <audio id="bgMusic" preload="none" loop>
      <source src="https://upload.wikimedia.org/wikipedia/commons/9/9f/Air.ogg" type="audio/ogg">
    </audio>

    <script>
      // ====== PROMENI OVO ZA SVAKOG KLIJENTA ======
      const EVENT_DATE = new Date("2026-06-20T17:00:00+02:00");
      const RSVP_URL   = "https://docs.google.com/spreadsheets/d/TVOR_SHEET_ID_HERE/edit#gid=0";
      // ===========================================

      ["rsvpBtn","rsvpBtn2","rsvpBtn3"].forEach(id => document.getElementById(id).href = RSVP_URL);

      // date text
      const dateText = document.getElementById("dateText");
      try{
        dateText.textContent = EVENT_DATE.toLocaleDateString("sr-RS", { weekday:"long", year:"numeric", month:"long", day:"numeric" });
      } catch(e){ dateText.textContent = EVENT_DATE.toDateString(); }

      // countdown
      const dd = document.getElementById("dd");
      const hh = document.getElementById("hh");
      const mm = document.getElementById("mm");
      const ss = document.getElementById("ss");
      const pad = (n) => String(n).padStart(2,"0");

      function tick(){
        const now = new Date();
        let diff = EVENT_DATE.getTime() - now.getTime();
        if(diff <= 0){ dd.textContent="0"; hh.textContent="00"; mm.textContent="00"; ss.textContent="00"; return; }
        const sec = Math.floor(diff/1000);
        const days = Math.floor(sec/86400);
        const hours = Math.floor((sec%86400)/3600);
        const mins = Math.floor((sec%3600)/60);
        const secs = sec%60;
        dd.textContent = String(days);
        hh.textContent = pad(hours);
        mm.textContent = pad(mins);
        ss.textContent = pad(secs);
      }
      tick(); setInterval(tick, 1000);

      // music toggle
      const music = document.getElementById("bgMusic");
      const toggle = document.getElementById("musicToggle");
      const status = document.getElementById("musicStatus");
      music.volume = 0.30;
      let playing = false;

      toggle.addEventListener("click", async () => {
        try{
          if(!playing){ await music.play(); playing=true; toggle.textContent="‚è∏ Pauziraj"; status.textContent="Ukljuƒçeno"; }
          else{ music.pause(); playing=false; toggle.textContent="‚ñ∂ Pusti"; status.textContent="Iskljuƒçeno"; }
        }catch(e){ status.textContent="Browser blokira pu≈°tanje"; }
      });

      // copy link
      document.getElementById("copyLink").addEventListener("click", async () => {
        try{ await navigator.clipboard.writeText(window.location.href); alert("Link je kopiran!"); }
        catch(e){ alert("Ne mogu automatski. Kopiraj ruƒçno iz address bara."); }
      });

      // reveal
      const revealEls = document.querySelectorAll(".reveal");
      if("IntersectionObserver" in window){
        revealEls.forEach(el => el.classList.add("can-animate"));
        const io = new IntersectionObserver((entries)=>{
          entries.forEach(e => { if(e.isIntersecting) e.target.classList.add("show"); });
        }, { threshold: 0.12 });
        revealEls.forEach(el => io.observe(el));
        setTimeout(()=> revealEls.forEach(el => el.classList.add("show")), 80);
      }

      // petals
      const canvas = document.getElementById("petals");
      const ctx = canvas.getContext("2d");
      let W=0, H=0, DPR=1;

      function resize(){
        DPR = Math.min(2, window.devicePixelRatio || 1);
        W = canvas.width  = Math.floor(innerWidth * DPR);
        H = canvas.height = Math.floor(innerHeight * DPR);
        canvas.style.width  = innerWidth + "px";
        canvas.style.height = innerHeight + "px";
      }
      addEventListener("resize", resize);
      resize();

      const rand=(a,b)=>Math.random()*(b-a)+a;
      const palette = [
        {r:215,g:196,b:154,a:0.38},
        {r:198,g:144,b:167,a:0.34},
        {r:143,g:183,b:177,a:0.30}
      ];
      const petals = Array.from({length: 18}, () => ({
        x: rand(0,W), y: rand(-H, 0),
        s: rand(7, 16)*DPR,
        vy: rand(0.45, 1.05)*DPR,
        vx: rand(-0.22, 0.22)*DPR,
        rot: rand(0, Math.PI*2),
        vr: rand(-0.012, 0.012),
        wob: rand(0.002, 0.009),
        c: palette[Math.floor(rand(0,palette.length))]
      }));

      function drawPetal(p){
        ctx.save();
        ctx.translate(p.x, p.y);
        ctx.rotate(p.rot);
        ctx.beginPath();
        ctx.moveTo(0, -p.s*0.95);
        ctx.quadraticCurveTo(p.s*0.72, -p.s*0.22, 0, p.s);
        ctx.quadraticCurveTo(-p.s*0.72, -p.s*0.22, 0, -p.s*0.95);
        ctx.closePath();
        ctx.fillStyle = `rgba(${p.c.r},${p.c.g},${p.c.b},${p.c.a})`;
        ctx.fill();
        ctx.restore();
      }

      function anim(){
        ctx.clearRect(0,0,W,H);
        for(const p of petals){
          p.y += p.vy;
          p.x += p.vx + Math.sin(p.y * p.wob) * 0.85*DPR;
          p.rot += p.vr;
          drawPetal(p);
          if(p.y > H + 30*DPR){ p.y = rand(-120*DPR, -20*DPR); p.x = rand(0,W); }
          if(p.x < -40*DPR) p.x = W + 40*DPR;
          if(p.x > W + 40*DPR) p.x = -40*DPR;
        }
        requestAnimationFrame(anim);
      }
      anim();
      // ===== INTRO OVERLAY LOGIC =====
      const overlay = document.getElementById("introOverlay");
      const site    = document.getElementById("siteContent");
      const openBtn = document.getElementById("openEnvelope");
      const skipBtn = document.getElementById("skipIntro");

      function finishIntro(){
        overlay.classList.add("done");
        overlay.setAttribute("aria-hidden","true");
        site.classList.remove("site-hidden");
        site.classList.add("site-visible");
        document.body.style.overflowY = "auto";
      }

      function openIntro(){
        overlay.classList.add("opening");
        // trajanje animacije poklopca + papira
        setTimeout(() => finishIntro(), 1150);
        try{ localStorage.setItem("wedding_intro_seen","1"); } catch(e){}
      }

      // Ako ≈æeli≈° da se intro prikazuje samo prvi put:
      let seen = false;
      try{ seen = localStorage.getItem("wedding_intro_seen") === "1"; } catch(e){}

   // UVEK prikazi intro (ne pamti)
document.body.style.overflowY = "hidden";
site.classList.add("site-hidden");


      openBtn.addEventListener("click", openIntro);
      skipBtn.addEventListener("click", () => {
        try{ localStorage.setItem("wedding_intro_seen","1"); } catch(e){}
        finishIntro();
      });

      // Escape = skip
      window.addEventListener("keydown", (e) => {
        if(e.key === "Escape" && !overlay.classList.contains("done")){
          try{ localStorage.setItem("wedding_intro_seen","1"); } catch(e){}
          finishIntro();
        }
      });
    </script>
  </div>
</body>
</html>
